<form [formGroup]="form">
  <div *ngIf="project">
    <header class="header">
      <div class="navbar navbar-fixed-top">
        <span *ngIf="project.code && project.title" class="header-a">{{project.code}} - {{project.title}}</span>
        <div class="div">
          <button [disabled]="!form.valid || !date.startDate || impl.selectedValue == -1" type="button"
                  class="save btn-success" (click)="projectEvent(1)">SAVE
          </button>
          <button [disabled]="!form.valid || !date.startDate || impl.selectedValue == -1" type="button"
                  class="save btn-primary" (click)="projectEvent(2)">SAVE&CLOSE
          </button>
          <button class="save btn-danger" type="button" (click)="projectEvent(3)">CANCEL</button>
        </div>
        <h6 *ngIf="project.modifyUser && project.modifyDate" class="h6">Last Modified by {{project.modifyUser}} on
          {{project.modifyDate | date : 'short'}}</h6>
      </div>
    </header>
    <div class="bottom"></div>
    <div class="color">
      <div>
        <h3>{{info}}</h3>
      </div>
      <div>
        <table class="code">
          <tr>
            <td><h6>Project Code<span style="color: red">*</span></h6></td>
            <td><h6>Project Title<span style="color: red">*</span></h6></td>
          </tr>
          <tr>
            <td><input class="input" type="text" [(ngModel)]="project.code" formControlName="code"></td>
            <td><input class="input" type="text" [(ngModel)]="project.title" formControlName="title"></td>
          </tr>
        </table>
      </div>
      <div>
        <table class="code">
          <tr>
            <td><h6>Description</h6></td>
          </tr>
          <tr>
            <td><textarea class="textarea" [(ngModel)]="project.description"
                          [ngModelOptions]="{standalone: true}"></textarea></td>
          </tr>
        </table>
      </div>
      <hr>
      <div>
        <table class="code">
          <tr>
            <td><h6>Implementation Status<span style="color: red">*</span></h6></td>
          </tr>
          <tr>
            <td>
              <combo-box-app [listObj]="implementationStatusesList" [selectedValue]="project.implementationStatusId"
                             (selectedId)="implStatuseSelectedId($event)" #impl></combo-box-app>
            </td>
          </tr>
        </table>
        <date-app [(startDate)]="project.startDate" [(endDate)]="project.endDate" #date></date-app>
      </div>
    </div>
    <hr>
    <div>
      <sectors-list-app [sectors]="project.sectors" (deletedSector)="restoreSector($event)"></sectors-list-app>
    </div>
    <div class="color">
      <table class="sector">
        <tr>
          <td><h6>Sector</h6></td>
          <td><h6 style="margin-left: 10px">Percent</h6></td>
        </tr>
        <tr>
          <td>
            <combo-box-app [listObj]="sectorsList" [selectedValue]="sectorSelectedId"
                           (selectedId)="selectedId($event)" #sec></combo-box-app>
          </td>
          <td>
            <input class="marg" type="number" [(ngModel)]="sectorPercent" [ngModelOptions]="{standalone: true}" max="100" min="0">
          </td>
          <td>
            <button [disabled]="sec.selectedValue == -1" (click)="addSector()">Add Sector</button>
          </td>
        </tr>
      </table>
    </div>
    <hr>
    <div>
      <locations-list-app [locations]="project.locations" (deletedLocation)="restoreLocation($event)" (editedLocation)="editLocation($event)"></locations-list-app>
    </div>
    <div class="code color">
      <button (click)="openPopUp()">Add Location</button>
    </div>
    <div>
      <location-popup-app (closePopUp)="closePopUp($event)" [locations]="project.locations"
                          [showPopUp]="showPopUp" [countryId]="countryid" [districtId]="districtId" [percent]="locationPercent"></location-popup-app>
    </div>
  </div>
  <div class="div-area"></div>
</form>
